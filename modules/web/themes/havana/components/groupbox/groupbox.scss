/*
 * Copyright (c) 2013 Haulmont Technology Ltd. All Rights Reserved.
 * Haulmont Technology proprietary and confidential.
 * Use is subject to license terms.
 */

// Version: $Id$

@mixin cuba-groupbox-defaults {
  outline: none; /* Prevent selection outline which might break layouts or cause scrollbars */
  text-align: left; /* Force default alignment */
  border: 0;
}

$groupBoxInnerPadding: 5px;
$groupBoxCaptionLineHeight: 18px;

@mixin havana-cuba-groupbox($primaryStyleName : cuba-groupbox) {

  .#{$primaryStyleName}.v-widget {
    @include cuba-groupbox-defaults;

    .#{$primaryStyleName}-fieldset {
      border: 1px solid #babfc0;
      margin: 0;
      padding: $groupBoxInnerPadding $groupBoxInnerPadding $groupBoxInnerPadding;
      width: 100%;
      height: 100%;
      -moz-box-sizing: border-box;
      -webkit-box-sizing: border-box;
      box-sizing: border-box;

      legend {
        margin: 0;
        padding: 0;
        font-weight: bold;
        white-space: nowrap;
      }

      .#{$primaryStyleName}-caption {
        @include cuba-groupbox-defaults;
        font-weight: bold;
        padding: 0 4px;
        line-height: $groupBoxCaptionLineHeight;

        .#{$primaryStyleName}-expander {
          width: 9px;
          height: 9px;
          float: left;
          cursor: pointer;
          margin-top: 4px;
          margin-right: 2px;
          background: transparent;
          background-repeat: no-repeat;
          background-position: center left;
          background-image: url(sprites/expand.png); /** sprite-ref: components; */
        }

        .#{$primaryStyleName}-expander.expanded {
          background-image: url(sprites/collapse.png); /** sprite-ref: components; */
        }

        .v-errorindicator {
          float: none;
          padding-right: 10px;
          display: inline;
          background: transparent;
        }

        .v-icon {
          display: inline;
          vertical-align: middle;
        }
      }

      .#{$primaryStyleName}-content {
        @include cuba-groupbox-defaults;
        overflow: hidden;
        border: none;
        -moz-box-sizing: border-box;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        width: 100%;
        height: 100%;
      }

      .#{$primaryStyleName}-deco {
        @include cuba-groupbox-defaults;
        height: 0;
        background: transparent;
        margin: 0;
      }

      .#{$primaryStyleName}-deco:before {
        display: block;
        content: "";
        width: 0;
        height: 0;
        margin-left: 0;
        background: transparent;
      }
    }
  }

  .#{$primaryStyleName}.#{$primaryStyleName}-nocaption > .#{$primaryStyleName}-fieldset {
    border: none;
    padding: 0;
  }
}

@mixin havana-cuba-groupbox-browser-fixes($primaryStyleName : cuba-groupbox) {
  .#{$primaryStyleName}.v-widget {
    .#{$primaryStyleName}-fieldset {
      .#{$primaryStyleName}-content.first-child-expanded {
        padding-bottom: $groupBoxCaptionLineHeight;
      }
    }
  }

  .#{$primaryStyleName}.v-widget.first-child-expanded.#{$primaryStyleName}-nocaption {
    .#{$primaryStyleName}-fieldset {
      .#{$primaryStyleName}-content {
        padding-bottom: 0;
      }
    }
  }
}

// include without .themename
.v-webkit,
.v-ie,
.v-opera {
  @include havana-cuba-groupbox-browser-fixes;
}