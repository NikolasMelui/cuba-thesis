<!--
  ~ Copyright (c) 2011 Haulmont Technology Ltd. All Rights Reserved.
  ~ Haulmont Technology proprietary and confidential.
  ~ Use is subject to license terms.
  -->

<window
        xmlns="http://www.haulmont.com/schema/cuba/gui/window.xsd"
        datasource="roleDs"
        caption="msg://caption"
        class="com.haulmont.cuba.gui.app.security.role.edit.RoleEditor"
        messagesPack="com.haulmont.cuba.gui.app.security.role.edit"
        lookupComponent="name"
        focusComponent="name">

    <metadataContext>
        <deployViews name="/com/haulmont/cuba/gui/app/security/role/role.views.xml"/>
    </metadataContext>

    <dsContext>
        <datasource id="roleDs" class="com.haulmont.cuba.security.entity.Role" view="_local"/>
    </dsContext>

    <#assign width = 200>
    <#assign widthPPB = 120>
    <#assign widthPPBMenu = 100>
    <layout expandLayout="true" expand="main">
        <vbox id="main" spacing="true" expand="permissions-types">
            <hbox spacing="true" margin="true" width="100%" expand="descrBox"
                  stylename="edit-area">
                <grid spacing="true">
                    <columns>
                        <column/>
                        <column/>
                        <column/>
                    </columns>
                    <rows>
                        <row>
                            <label value="msg://name"/>
                            <textField id="name" datasource="roleDs" property="name" width="${width}" required="true"
                                       requiredMessage="msg://nameMsg"/>
                        </row>
                        <row>
                            <label value="msg://locName"/>
                            <textField id="locName" datasource="roleDs" property="locName" width="${width}"/>
                        </row>
                    </rows>
                </grid>

                <grid spacing="true">
                    <columns>
                        <column/>
                        <column/>
                        <column/>
                    </columns>
                    <rows>
                        <row>
                            <label value="msg://roleType"/>
                            <lookupField id="typeLookup" datasource="roleDs" property="type" required="true"/>
                        </row>
                        <row>
                            <label value="msg://defaultRole"/>
                            <checkBox id="defaultRole" datasource="roleDs" property="defaultRole"/>
                        </row>
                    </rows>
                </grid>

                <hbox spacing="true" id="descrBox" expand="description;width=300px;height=100%">
                    <label value="msg://description"/>
                    <textField id="description" datasource="roleDs" property="description" rows="4"/>
                </hbox>
            </hbox>

            <tabsheet id="permissions-types">
                <tab id="screenPermissionsTab" caption="msg://screen-permissions">
                    <iframe src="/com/haulmont/cuba/gui/app/security/role/edit/tabs/screens-permission-tab.xml"
                            id="screensTabFrame"/>
                </tab>
                <tab id="entityPermissionsTab" caption="msg://entity-permissions" lazy="true">
                    <iframe src="/com/haulmont/cuba/gui/app/security/role/edit/tabs/entities-permission-tab.xml"
                            id="entitiesTabFrame"/>
                </tab>
                <tab id="propertyPermissionsTab" caption="msg://property-permissions" lazy="true">
                    <iframe src="/com/haulmont/cuba/gui/app/security/role/edit/tabs/attributes-permission-tab.xml"
                            id="attributesTabFrame"/>
                </tab>
                <tab id="specificPermissionsTab" caption="msg://specific-permissions" lazy="true">
                    <iframe src="/com/haulmont/cuba/gui/app/security/role/edit/tabs/specific-permission-tab.xml"
                            id="specificTabFrame"/>
                </tab>
<!--                <tab id="uiPermissionsTab" caption="msg://ui-permissions" lazy="true">
                    <iframe src="/com/haulmont/cuba/gui/app/security/role/edit/tabs/ui-permission-tab.xml"
                            id="uiTabFrame"/>
                </tab>-->
            </tabsheet>
        </vbox>
        <iframe id="windowActions" src="/com/haulmont/cuba/gui/edit-window.actions.xml"/>
    </layout>
</window>
