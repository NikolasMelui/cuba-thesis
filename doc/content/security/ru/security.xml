<?xml version='1.0' encoding='UTF-8'?>
<!-- This document was created with Syntext Serna Free. --><!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" []>
<book id="reporting" lang="ru">
  <bookinfo>
    <copyright>
      <year>2012</year>
      <holder>Haulmont (<ulink url="http://www.haulmont.ru/">www.haulmont.ru</ulink>)</holder>
    </copyright>
    <title>Платформа <trademark>CUBA</trademark>. Подсистема безопасности </title>
  </bookinfo>
  <preface lang="ru">
    <title>Предисловие</title>
    <section id="appointment_id">
      <title>Назначение</title>
      <para>Данный документ является руководством по управлению разграничением прав пользователей в системах, разработанных на платформе <trademark>CUBA</trademark>.</para>
    </section>
    <section>
      <title>Целевая аудитория</title>
      <para>Данное руководство предназначено для разработчиков  и опытных администраторов. </para>
    </section>
    <section>
      <title>Структура руководства</title>
      <para>Данное руководство состоит из следующих разделов:</para>
      <para><link linkend="chapter0_theoretical_info">
          <emphasis role="bold">Глава 1. Обзор подсистемы безопасности</emphasis>
        </link></para>
      <para>Данная глава содержит краткое описание подсистемы безопасности платформы.</para>
      <para><link linkend="chapter1_tool_description">
          <emphasis role="bold">Глава 2. Инструменты настройки подсистемы безопасности</emphasis>
        </link></para>
      <para>В данной главе содержится описание графического пользовательского интерфейса подсистемы, с помощью которой производится управление безопасностью. </para>
      <para><link linkend="chapter3_detail_info">
          <emphasis role="bold">Глава 3. Механизмы управления подсистемой безопасности</emphasis>
        </link></para>
      <para>В главе 3 приводится подробное описание механизмов подсистемы безопасности.</para>
      <para><link linkend="chapter3_examples">
          <emphasis role="bold">Глава 4. Примеры управления доступом в системе</emphasis>
        </link></para>
      <para>В главе 4 приводится подробное описание  действий по управлению безопасностью системы на основе  примеров к приложению <application>Магазин</application>.</para>
    </section>
    <section id="additional_info">
      <title>Дополнительные материалы</title>
      <para>Настоящее Руководство, а также другая документация по платформе <trademark>CUBA</trademark> доступны по адресу <ulink url="http://docs.haulmont.com/cuba/">http://docs.haulmont.com/cuba/</ulink></para>
    </section>
    <section>
      <title>Обратная связь</title>
      <para>Если  у Вас имеются предложения по улучшению данного руководства, пожалуйста, обратитесь в службу поддержки по электронной почте <email>cuba@haulmont.com</email>. В теме письма укажите тег <code>[Documentation]</code>.</para>
      <para>Если Вы обнаружили ошибку, укажите, пожалуйста, номер главы и приведите небольшой участок окружающего текста для облегчения поиска. </para>
    </section>
  </preface>
  <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="chapter0.xml" encoding="UTF-8"/>
  <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="chapter1.xml" encoding="UTF-8"/>
  <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="chapter2.xml" encoding="UTF-8"/>
  <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="chapter3.xml" encoding="UTF-8"/>
  <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="glossary.xml" encoding="UTF-8"/>
  <appendix id="appendix_security_properties">
    <title>Описание свойств подсистемы безопасности</title>
    <para>Перечислим основные свойства, которые имеют отношение к подсистеме безопасности.</para>
    <itemizedlist>
      <listitem>
        <para id="property_available_locales"><property>cuba.availableLocales</property>. Список поддерживаемых языков интерфейса. Формат свойства: <code>&lt;Название языка&gt;|&lt;Языковой код&gt;</code>. Значения разных языков между собой разделяются точкой с запятой. Пример: <programlisting>cuba.availableLocales=French|fr;English|en</programlisting></para>
        <para><code>&lt;Название языка&gt;</code> −  это название, которое будет отображаться в списках доступных языков. Например, в окне входа в систему, в экране редактирования пользователя. <code>&lt;Языковой код</code>&gt; − это суффикс для формирования <glossterm linkend="glossary_localized_folders_id">файлов локализации</glossterm>. Например, <filename>messages_fr.properties.</filename></para>
        <para>Следует иметь в виду, что язык, который указан первым в списке языков  свойства <property>cuba.availableLocales</property>, будет отображаться первым в списке доступных языков в том случае, если среди языков данного свойства не будет найден текущий язык системы. В противном случае первым будет отображаться язык системы. </para>
        <para>Если для языка,  указанного в свойстве, отсутствует файл для его локализации, то по умолчанию берется локализация из файла без суффикса − <filename>messages.properties</filename>.</para>
        <para>Значение по умолчанию:</para>
        <para><property>cuba.availableLocales</property>=<literal>English|en;Russian|ru</literal></para>
        <para>Интерфейс: <code>GlobalConfig</code></para>
        <para>Уровень: свойство принадлежит всем <glossterm linkend="glossary_app_tiers">уровням</glossterm>.</para>
      </listitem>
      <listitem id="parameter_locale_visible">
        <para><property>cuba.web.localeSelectVisible</property>. Включает или отключает возможность пользователя выбирать язык
интерфейса при входе в систему. </para>
        <para>Значение по умолчанию:</para>
        <para><property>cuba.web.localeSelectVisible</property>=<literal>true</literal></para>
        <para>Интерфейс: <code>GlobalConfig</code></para>
        <para>Уровень: свойство принадлежит всем <glossterm linkend="glossary_app_tiers">уровням</glossterm>.</para>
      </listitem>
      <listitem>
        <para><property>cuba.trustedClientPassword</property>. Пароль, используемый методом <code>LoginService.loginTrusted()</code>. Доверенный клиент может зайти в систему, не вводя пользовательский пароль. Это свойство используется при интеграции с <link linkend="section_AD">Active Directory</link></para>
        <para>Интерфейсы: <code>GlobalConfig</code>, <code>ServerConfig</code></para>
        <para>Уровень: свойство принадлежит всем <glossterm linkend="glossary_app_tiers">уровням</glossterm>.</para>
      </listitem>
      <listitem id="property_sessionExpirTime">
        <para><property>cuba.userSessionExpirationTimeoutSec</property> задает  таймаут неактивности сессии пользователя
 в секундах.</para>
        <para>Значение по умолчанию:</para>
        <para><property>cuba.userSessionExpirationTimeoutSec</property>=<literal>1800</literal></para>
        <para>Интерфейс: <code>ServerConfig</code></para>
        <para>Уровень: <glossterm linkend="text_middleware_id">Middleware</glossterm>.</para>
        <caution>
          <title>Совет</title>
          <para>В большинстве случаев рекомендуется выставлять параметры <property>cuba.userSessionExpirationTimeoutSec</property> и  <link linkend="property_httpExpirTime">cuba.httpSessionExpirationTimeoutSec</link>  в одинаковое значение.</para>
        </caution>
      </listitem>
      <listitem id="property_httpExpirTime">
        <para><property>cuba.httpSessionExpirationTimeoutSec</property> задает  таймаут бездействия HTTP-сессии
 в секундах.</para>
        <para>Значение по умолчанию:</para>
        <para><property>cuba.httpSessionExpirationTimeoutSec</property>=<literal>1800</literal></para>
        <para>Интерфейс: <code>WebConfig</code></para>
        <para>Уровень:  <glossterm linkend="text_webclient_id">Web Client</glossterm>.</para>
        <caution>
          <title>Совет</title>
          <para>В большинстве случаев рекомендуется выставлять параметры <link linkend="property_sessionExpirTime">cuba.userSessionExpirationTimeoutSec</link> и  <property>cuba.httpSessionExpirationTimeoutSec</property>  в одинаковое значение.</para>
        </caution>
      </listitem>
      <listitem id="property_passwPolicyEnabled">
        <para><property>cuba.passwordPolicyEnabled</property> определяет, нужно ли применять политику проверки пароля. Если свойство имеет значение <literal>true</literal>, то все новые пароли будут проверены в соответствии со свойством <property>cuba.passwordPolicyRegExp</property>.</para>
        <para>Значение по умолчанию:</para>
        <para><property>cuba.passwordPolicyEnabled</property>=<literal>false</literal></para>
        <para>Интерфейс: <code>ClientConfig</code></para>
        <para>Уровни:   <glossterm linkend="text_webclient_id">Web Client</glossterm>, <glossterm linkend="text_portal_id">Web Portal</glossterm>, <glossterm linkend="text_desktop_id">Desktop Client</glossterm>.</para>
      </listitem>
      <listitem id="property_passwPolicyRegExp">
        <para><property>cuba.passwordPolicyRegExp</property>. В данном свойстве задается регулярное выражение, которое используется в политике проверки пароля.</para>
        <para>Значение по умолчанию:</para>
        <para><literal>cuba.passwordPolicyRegExp=((?=.*\\d)(?=.*\\p{javaLowerCase}) (?=.*\\p{javaUpperCase}).{6,20})</literal></para>
        <para>Это означает, что в пароль должен содержать от 6 до 20 символов, в нем можно использоваться цифры, символы и буквы латинского алфавита. При этом обязательно в пароле должна  быть хотя бы одна цифра, одна буква в нижнем регистре и одна буква в верхнем регистре. Более подробная информация о синтаксисе регулярных выражений можно найти на сайтах: <ulink url="http://ru.wikipedia.org/wiki/%D0%A0%D0%B5%D0%B3%D1%83%D0%BB%D1%8F%D1%80%D0%BD%D1%8B%D0%B5_%D0%B2%D1%8B%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F">http://ru.wikipedia.org/wiki/Регулярные_выражения</ulink> и <ulink url="http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html">http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html</ulink></para>
        <para>Интерфейс: <code>ClientConfig</code></para>
        <para>Уровни:   <glossterm linkend="text_webclient_id">Web Client</glossterm>, <glossterm linkend="text_portal_id">Web Portal</glossterm>, <glossterm linkend="text_desktop_id">Desktop Client</glossterm>.</para>
      </listitem>
      <listitem>
        <para><property>cuba.web.loginDialogDefaultUser</property> задает имя пользователя по умолчанию. Оно будет автоматически указываться в экране входа в систему. Если в качестве значения свойства указать
<literal>&lt;disabled&gt;</literal>, то при входе в систему пользователь сам будет вводить имя.</para>
        <para>Значение по умолчанию:</para>
        <para><property>cuba.web.loginDialogDefaultUser=admin</property></para>
        <para>Интерфейс: <code>WebConfig</code></para>
        <para>Уровень:  <glossterm linkend="text_webclient_id">Web Client</glossterm>.</para>
      </listitem>
      <listitem>
        <para><property>cuba.web.loginDialogDefaultPassword</property> задает имя пользователя по умолчанию. Оно будет автоматически указываться в экране входа в систему. Если в качестве значения свойства указать
<literal>&lt;disabled&gt;</literal>, то при входе в систему пользователь сам будет вводить пароль.</para>
        <para>Значение по умолчанию:</para>
        <para><property>cuba.web.loginDialogDefaultPassword</property>=<literal>admin</literal></para>
        <para>Интерфейс: <code>WebConfig</code></para>
        <para>Уровень:  <glossterm linkend="text_webclient_id">Web Client</glossterm>.</para>
      </listitem>
      <listitem id="property_fullNamePattern">
        <para><property>cuba.user.fullNamePattern</property> задает шаблон формирования полного имени пользователя. </para>
        <para>Значение по умолчанию</para>
        <para><property>cuba.user.fullNamePattern</property>=<literal>{LL| }{F|. }{M|.}</literal></para>
        <para>Таким образом, можно сформировать полное имя по  шаблону из имени, отчества и фамилии  пользователя. В шаблоне  используются следующие правила:</para>
        <itemizedlist>
          <listitem>
            <para>Фигурными скобками <literal>{}</literal> разделяются части шаблона между собой</para>
          </listitem>
          <listitem>
            <para>Правила формирования шаблона внутри фигурных скобок: один из следующих символов и далее, без пробела, символ   <literal>|</literal>.</para>
            <para><literal>LL</literal> означает фамилию пользователя, написанную в полном варианте (Иванов)</para>
            <para><literal>L</literal> означает фамилию пользователя, написанную в кратком варианте (И)</para>
            <para><literal>FF</literal> означает имя пользователя, написанного в полном варианте (Петр)</para>
            <para><literal>F</literal> означает фамилию пользователя, написанную в кратком варианте (П)</para>
            <para><literal>MM</literal> означает отчество пользователя, написанное в полном варианте (Сергеевич)</para>
            <para><literal>M</literal> означает отчество пользователя, написанное в кратком варианте (С)</para>
          </listitem>
          <listitem>
            <para>После символа <literal>|</literal> могут идти любые символы, в том числе, и пробел.</para>
          </listitem>
        </itemizedlist>
      </listitem>
    </itemizedlist>
  </appendix>
</book>
