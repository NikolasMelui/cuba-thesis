<?xml version='1.0' encoding='UTF-8'?>
<!-- This document was created with Syntext Serna Free. --><glossary id="glossary_id">
  <title>Основные определения и понятия</title>
  <glossdiv>
    <title>Б</title>
    <glossentry id="glossary_browser_id">
      <glossterm>
        <emphasis role="bold">Браузер</emphasis>
      </glossterm>
      <glossdef>
        <para>Экранная форма, на которой размещается таблица со списком сущностей, а также кнопки создания, редактирования, удаления сущности.</para>
      </glossdef>
    </glossentry>
  </glossdiv>
  <glossdiv>
    <title>Г</title>
    <glossentry id="glossary_main_localized_folder_id">
      <glossterm>
        <emphasis role="bold">Главный пакет сообщений</emphasis>
      </glossterm>
      <glossdef>
        <para><glossterm linkend="glossary_localized_folders_id">Пакет локализованных сообщений</glossterm>, содержащий заголовки пунктов меню, названия кнопок и других элементов интерфейса. Располагается в пакете, определяемым <glossterm linkend="glossary_app_properties_id">свойством</glossterm> <parameter>cuba.appConfig.messagesPack</parameter> приложения веб-клиента.</para>
      </glossdef>
    </glossentry>
  </glossdiv>
  <glossdiv>
    <title>К</title>
    <glossentry id="glossary_controller_id">
      <glossterm>
        <emphasis role="bold">Контроллер экрана</emphasis>
      </glossterm>
      <glossdef>
        <para><classname>Java</classname> или <classname>Groovy</classname> класс,  связанный с <glossterm linkend="glossary_xml_descriptor_id">XML-дескриптором</glossterm> экрана и содержащий логику инициализации и обработки событий экрана.</para>
      </glossdef>
    </glossentry>
  </glossdiv>
  <glossdiv>
    <title>П</title>
    <glossentry id="glossary_localized_folders_id">
      <glossterm>
        <emphasis role="bold">Пакет локализованных сообщений</emphasis>
      </glossterm>
      <glossdef>
        <para>Содержит файлы локализованных сообщений  для задания элементов пользовательского интерфейса, зависящих от языка пользователя, таких как названий сущностей и их атрибутов, элементов экранов и так далее. Правила создания файлов локализованных сообщений:</para>
        <itemizedlist>
          <listitem>
            <para>Файл по умолчанию имеет имя <filename>messages.properties</filename>, для конкретного языка − <filename>messages_ru.properties</filename> и т.д. При отсутствии файла конкретного языка или при отсутствии искомого ключа в файле конкретного языка будет использовано сообщение из файла по умолчанию.</para>
          </listitem>
          <listitem>
            <para>Кодировка <code>UTF-8</code>.</para>
          </listitem>
          <listitem>
            <para>Можно включать другие файлы сообщений с помощью ключа <literal>@include</literal>. При этом если некоторый ключ встречается и во включаемом файле, и в текущем, будет использовано сообщение из текущего (переопределение). Пример включения файла:<programlisting>@include=com.haulmont.cuba.web

actions.Create=Create
actions.Edit=Edit
...</programlisting></para>
          </listitem>
          <listitem>
            <para>Полным именем пакета сообщений считается имя Java-пакета, содержащего языковые файлы. Например, именем пакета сообщений, расположенного в <filename>/com/haulmont/cuba/web/app/ui/security/ user/messages.properties</filename> является строка <package>com.haulmont.cuba.web.app.ui.security.user</package></para>
          </listitem>
        </itemizedlist>
      </glossdef>
    </glossentry>
    <glossentry id="glossary_search_folders_id">
      <glossterm>
        <emphasis role="bold">Папки поиска</emphasis>
      </glossterm>
      <glossdef>
        <para>Папки данной категории могут быть созданы и настроены пользователем (за
исключением подкатегории &quot;Системные&quot;). Подкатегория &quot;Системные&quot; содержит
предустановленные папки поиска, которые доступны всем
пользователям системы.</para>
      </glossdef>
    </glossentry>
    <glossentry id="glossary_app_folders_id">
      <glossterm>
        <emphasis role="bold">Папки приложения</emphasis>
      </glossterm>
      <glossdef>
        <para>Папки данной категории содержат задачи, по которым требуются
действия пользователя.</para>
      </glossdef>
    </glossentry>
  </glossdiv>
  <glossdiv>
    <title>Ф</title>
    <glossentry id="glossary_filter_id">
      <glossentry id="glossary_filter_id_1">
        <glossterm>
          <emphasis role="bold">Generic Filter</emphasis>
        </glossterm>
        <glossdef>
          <para>Служит для создания и применения в режиме текущего времени произвольных фильтров для <interfacename>CollectionDatasources</interfacename>.</para>
        </glossdef>
      </glossentry>
      <glossterm>
        <emphasis role="bold">Фильтр</emphasis>
      </glossterm>
      <glossdef>
        <para>Описывает правила фильтрации набора записей в некотором экране системы. Может быть создан пользователем в процессе работы с системой. Фильтры делятся на две категории: локальные (созданные пользователем и доступные только ему) и глобальные (доступные всем пользователям).</para>
      </glossdef>
    </glossentry>
  </glossdiv>
  <glossdiv>
    <title>A</title>
    <glossentry id="glossary_app_tiers">
      <glossterm>
        <emphasis role="bold">Application Tiers</emphasis>
      </glossterm>
      <glossdef>
        <para>Приложение, основанное на платформе, физически состоит из нескольких уровней (tiers):</para>
        <itemizedlist>
          <listitem>
            <para id="text_middleware_id"><structfield>Middleware</structfield>. Средний слой, содержащий основную бизнес-логику приложения. Представляет собой отдельное веб-приложение под управлением стандартного контейнера <application>Java EE Web Profile</application>.</para>
          </listitem>
          <listitem>
            <para id="text_webclient_id"><structfield>Web Client</structfield>. Основной клиентский уровень, как правило, содержащий полнофункциональный интерфейс для Intranet-пользователей. Представляет собой отдельное веб-приложение под управлением стандартного контейнера <application>Java EE Web Profile</application>. Реализация пользовательского интерфейса основана на фреймворке <application>Vaadin</application>.</para>
          </listitem>
          <listitem>
            <para id="text_portal_id"><structfield>Web Portal</structfield>. Дополнительный клиентский уровень, содержащий интерфейс для внешних (Internet) пользователей. Может использоваться для интеграции с мобильными устройствами или сторонними приложениями. Представляет собой отдельное веб-приложение под управлением стандартного контейнера <application>Java EE Web Profile</application>. Реализация пользовательского интерфейса основана на фреймворке <application>Spring MVC</application>.</para>
          </listitem>
          <listitem>
            <para id="text_desktop_id"><structfield>Desktop Client</structfield>. Дополнительный клиентский уровень, содержащий интерфейс для Intranet-пользователей. Представляет собой десктопное Java-приложение, реализация пользовательского интерфейса основана на фреймворке <application>Java Swing</application>.</para>
          </listitem>
        </itemizedlist>
      </glossdef>
    </glossentry>
    <glossentry id="glossary_app_properties_id">
      <glossterm>
        <emphasis role="bold">Application Properties</emphasis>
      </glossterm>
      <glossdef>
        <para wordsize="20"><emphasis role="bold">Основные понятия</emphasis></para>
        <para>Свойства приложения − именованные данные различных типов, определяющие всевозможные аспекты конфигурации и функционирования приложения.</para>
        <para>По назначению свойства приложения можно классифицировать следующим образом:</para>
        <itemizedlist>
          <listitem>
            <para>Конфигурационные параметры: определяют наборы конфигурационных файлов и некоторые параметры пользовательского интерфейса. Например: <parameter>cuba.springContextConfig</parameter>, <parameter>cuba.web.useLightHeader</parameter>.</para>
          </listitem>
          <listitem>
            <para>Параметры развертывания: различные URL для соединения <glossterm linkend="glossary_app_tiers">уровней</glossterm> приложения, тип используемой БД, настройки подсистемы безопасности и т.д. Например: <parameter>cuba.connectionUrl</parameter>, <parameter>cuba.dbmsType,</parameter> <parameter>cuba.userSessionExpirationTimeoutSec</parameter>.</para>
          </listitem>
          <listitem>
            <para>Параметры времени выполнения: активность аудита, параметры отсылки email и т.д. Например, <parameter>cuba.security.EntityLog.enabled</parameter>, <parameter>cuba.email.smtpHost</parameter>.</para>
          </listitem>
        </itemizedlist>
        <para><emphasis role="bold">Работа со свойствами приложения</emphasis></para>
        <formalpara>
          <title>Программный доступ к свойствам</title>
          <para>Основной способ доступа к свойствам приложения из программного кода − использование Java-интерфейсов механизма <glossterm linkend="glossary_conf_parameter_id">Configuration Parameters</glossterm>. Кроме того, все свойства конфигурации и развертывания доступны через методы класса <classname>com.haulmont.cuba.core.sys.AppContext</classname>.</para>
        </formalpara>
        <formalpara>
          <title>Принадлежность уровням</title>
          <para>Как правило, некоторое свойство принадлежит только одному или нескольким <glossterm linkend="glossary_app_tiers">уровням приложения</glossterm>. Например, <parameter>cuba.persistenceConfig</parameter> имеет смысл только для <glossterm linkend="text_middleware_id">Middleware</glossterm>,  <parameter>cuba.web.useLightHeader</parameter> − только для <glossterm linkend="glossary_app_tiers">Web Client</glossterm>, а <parameter>cuba.springContextConfig </parameter>− для всех уровней.</para>
          <para>Принадлежность к уровню означает, что если Вы хотите задать значение некоторому свойству, это необходимо сделать на всех уровнях, которым данное свойство принадлежит (смотрите <link linkend="glossary_saving_properties">Хранение значений свойств</link>).</para>
          <para>Принадлежность можно выяснить следующими способами:<itemizedlist>
              <listitem>
                <para>Из документации</para>
              </listitem>
              <listitem>
                <para>Проследив использование свойства в коде приложения</para>
              </listitem>
              <listitem>
                <para>Если к свойству есть доступ через Java-интерфейс, то по принадлежности интерфейса модулю проекта. Ниже приведено соответствие модуля объявления интерфейса и принадлежности свойства <glossterm linkend="glossary_app_tiers">уровням приложения</glossterm>:</para>
                <itemizedlist>
                  <listitem>
                    <para><structname>global</structname> − свойство принадлежит всем <glossterm linkend="glossary_app_tiers">уровням</glossterm></para>
                  </listitem>
                  <listitem>
                    <para><structname>core</structname> − <glossterm>Middleware</glossterm></para>
                  </listitem>
                  <listitem>
                    <para><structname>client</structname> − <glossterm linkend="text_webclient_id">Web Client</glossterm>, <glossterm linkend="text_portal_id">Web Portal</glossterm>, <glossterm linkend="text_desktop_id">Desktop Client</glossterm></para>
                  </listitem>
                  <listitem>
                    <para><structname>web</structname> − <glossterm linkend="text_webclient_id">Web Client</glossterm></para>
                  </listitem>
                  <listitem>
                    <para><structname>web-portal</structname> − <glossterm linkend="text_portal_id">Web Portal</glossterm></para>
                  </listitem>
                  <listitem>
                    <para><structname>desktop</structname> − <glossterm linkend="text_desktop_id">Desktop Client</glossterm></para>
                  </listitem>
                </itemizedlist>
              </listitem>
            </itemizedlist></para>
        </formalpara>
        <formalpara>
          <title>JMX-интерфейс</title>
          <para>Некоторые <glossterm linkend="glossary_app_tiers">уровни приложения</glossterm> определяют JMX-интерфейсы для доступа к свойствам приложения. В частности, на уровне <glossterm linkend="text_middleware_id">Middleware</glossterm> имеется JMX-интерфейс <classname>ConfigStorageMBean</classname> с именем <classname>app-core.cuba:service=ConfigStorage</classname>, а на уровне <glossterm linkend="text_webclient_id">Web Client</glossterm> − <classname>ConfigurationMBean</classname> с именем <classname>app.cuba:service=Configuration</classname>. Методы этих интерфейсов работают по отдельности со свойствами конфигурации и развертывания (<parameter>*AppProperties</parameter>) и со свойствами времени выполнения (<parameter>*DbProperties</parameter>). Это обусловлено различием механизмов <link linkend="glossary_saving_properties">хранения</link> этих категорий свойств.</para>
        </formalpara>
        <para id="glossary_saving_properties"><emphasis role="bold">Хранение значений свойств</emphasis></para>
        <formalpara id="text_properties_files">
          <title>Файлы свойств</title>
          <para>Свойства, определяющие конфигурацию и параметры развертывания, задаются в специальных файлах свойств, имеющих имя вида <filename>*-app.properties</filename>. Каждый <glossterm linkend="glossary_app_tiers">уровень приложения</glossterm> имеет набор таких файлов, включающий в себя файлы из базовых проектов платформы и файл текущего приложения. Набор файлов свойств различен для разных уровней приложения и определяется следующим образом:</para>
        </formalpara>
        <itemizedlist>
          <listitem>
            <para>Для уровней, являющихся веб-приложениями (<glossterm linkend="text_middleware_id">Middleware</glossterm>, <glossterm linkend="text_webclient_id">Web Client</glossterm>, <glossterm linkend="text_portal_id">Web Portal</glossterm>) набор файлов свойств задается в <filename>web.xml</filename> в параметре <parameter>appPropertiesConfig</parameter>.</para>
          </listitem>
          <listitem>
            <para>Для уровня <glossterm linkend="text_desktop_id">Desktop Client</glossterm> основной способ задания набора файлов свойств − переопределение в приложении метода <methodname>getDefaultAppPropertiesConfig</methodname> в классе-наследнике <classname>com.haulmont.cuba.desktop.App</classname>.</para>
          </listitem>
        </itemizedlist>
        <para>Например, набор файлов свойств уровня <glossterm linkend="text_middleware_id">Middleware</glossterm> проекта <application>shop</application> − <filename>web.xml</filename> − выглядит следующим образом:</para>
        <programlisting>classpath:cuba-app.properties
classpath:shop-app.properties
file:${catalina.home}/conf/app-core/local.app.properties</programlisting>
        <para>Здесь префикс <classname>classpath:</classname> означает, что данный файл нужно искать в Java classpath, префикс <classname>file:</classname> − в файловой системе. Возможно использование системных свойств Java, в данном случае это <classname>catalina.home</classname> − путь к корню <application>Tomcat</application>.</para>
        <para>Порядок перечисления файлов важен, так как значения, указанные в каждом последующем файле заменяют значения одноименных свойств, заданные в предыдущих файлах. Этим достигается переопределение свойств платформы в конкретном приложении.</para>
        <para id="glossary_local_properties">Последний файл в приведенном наборе − <filename>local.app.properties</filename>. Подробнее об этом файле можно узнать в определении <link linkend="glossary_local_app_properties_id">Local Application Properies</link>.</para>
        <para id="glossary_local_properties_1"><emphasis role="bold">Синтаксис</emphasis></para>
        <para><warning>
            <para>Обратите внимание на синтаксис ключей и значений в *.properties файлах.</para>
            <itemizedlist>
              <listitem>
                <para>Ключ состоит из латинских букв и цифр, разделенных точкой</para>
              </listitem>
              <listitem>
                <para>Значение пишется после знака равно (=)</para>
              </listitem>
              <listitem>
                <para>Значение <emphasis role="bold">никогда</emphasis> не берется к кавычки &quot;&quot; или &apos;&apos;</para>
              </listitem>
              <listitem>
                <para>Файловые пути записываются либо в UNIX виде (/opt/haulmont/), либо в Windows виде (c:\\haulmont\\)</para>
              </listitem>
              <listitem>
                <para>Для различных спецсимволов используются коды (\n \t \r). \  является зарезервированным символом, для вставки в значение экранируется сам собой (\\). 
Подробнее: <ulink url="http://docs.oracle.com/javase/tutorial/java/data/characters.html">http://docs.oracle.com/javase/tutorial/java/data/characters.html</ulink></para>
              </listitem>
              <listitem>
                <para>В значениях могут присутствовать спецсимволы (пробелы, табуляции).     Внимательно проверяйте значения, скопированные в файл из других программ</para>
              </listitem>
            </itemizedlist>
          </warning></para>
        <formalpara>
          <title>Таблица базы данных</title>
          <para>Параметры времени выполнения хранятся в БД в таблице <database>SYS_CONFIG</database>. Хранящиеся в БД свойства кэшируются на уровне <glossterm linkend="text_middleware_id">Middleware</glossterm>. Очистить кэш можно через JMX-интерфейсы <classname>app-core.cuba:service=ConfigStorage</classname> методом <methodname>clearCache</methodname> или <classname>app-core.cuba:service=CachingFacade</classname> методом <methodname>clearConfigStorageCache</methodname>.</para>
        </formalpara>
        <para><emphasis role="bold">Значения по-умолчанию</emphasis></para>
        <para>Если обращение к свойству производится через Java-интерфейс механизма <glossterm linkend="glossary_conf_parameter_id">Configuration Parameters</glossterm> и если значение свойства не задано в месте его хранения (файлы <filename>*-app.properties</filename> или БД), то будет возвращено значение по умолчанию, если оно задано в аннотации соответствующего метода Java-интерфейса.</para>
        <para>Подробное описание свойств подсистемы безопасности содержится в <link linkend="appendix_security_properties">Приложении А</link>.</para>
      </glossdef>
    </glossentry>
  </glossdiv>
  <glossdiv>
    <title>C</title>
    <glossentry id="glossary_conf_parameter_id">
      <glossterm>
        <emphasis role="bold">Configuration Parameters</emphasis>
      </glossterm>
      <glossdef>
        <para>Подсистема работы с конфигурационными параметрами позволяет сохранять/извлекать пары имя-значение с помощью стандартных Java-интерфейсов. При этом хранилищем параметров может быть база данных, системные свойства Java и свойства приложения, задаваемые в файлах <filename>*-app.properties</filename>.</para>
      </glossdef>
    </glossentry>
  </glossdiv>
  <glossdiv>
    <title>J</title>
    <glossentry id="glossary_jpql_id">
      <glossterm>
        <emphasis role="bold">JPQL</emphasis>
      </glossterm>
      <glossdef>
        <para>Платформо-независимый объектно-ориентированный язык запросов, определенный как часть спецификации Java Persistence API. Подробнее о JPQL можно прочитать на сайте <ulink url="http://openjpa.apache.org/">http://openjpa.apache.org/</ulink></para>
      </glossdef>
    </glossentry>
  </glossdiv>
  <glossdiv>
    <title>L</title>
    <glossentry id="glossary_local_app_properties_id">
      <glossterm>
        <emphasis role="bold">Local Application Properties</emphasis>
      </glossterm>
      <glossdef>
        <para>Файл, в котором задаются или переопределяются <glossterm linkend="glossary_app_properties_id">свойства приложения</glossterm> при развертывании. Путь к этому файлу    указывается в <filename>web.xml</filename> соответствующего <glossterm linkend="glossary_app_tiers">уровня приложения</glossterm>. </para>
        <programlisting>classpath:cuba-app.properties
classpath:shop-app.properties
file:${catalina.home}/conf/app-core/local.app.properties</programlisting>
        <para>Если  во время инсталляции системы требуется переопределение некоторых параметров (как правило, различных URL), создайте этот файл и поместите в него переопределяемые свойства. При последующих обновлениях системы такой файл с локальными настройками легко сохранить. </para>
      </glossdef>
    </glossentry>
  </glossdiv>
  <glossdiv lang="ru">
    <title>X</title>
    <glossentry id="glossary_xml_descriptor_id">
      <glossterm>
        <emphasis role="bold">XML-дескриптор</emphasis>
      </glossterm>
      <glossdef>
        <para>Описывает <glossterm linkend="glossary_datasource_id">источники данных</glossterm> и расположение визуальных компонентов экрана.</para>
      </glossdef>
    </glossentry>
  </glossdiv>
</glossary>
