<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" []>
<!-- This document was created with Syntext Serna Free. --><chapter id="chapter_development" lang="ru">
  <title>Разработка приложений</title>
  <section>
    <title>Рекомендуемый стиль кода</title>
    <para><emphasis role="bold">Форматирование кода</emphasis></para>
    <itemizedlist>
      <listitem>
        <para>Для Java и Groovy кода рекомендуется придерживаться стандартного стиля, описанного в документе <ulink url="http://www.oracle.com/technetwork/java/codeconv-138413.html">Code Conventions for the Java Programming Language</ulink>. При программировании в <application>IntelliJ IDEA</application> для этого достаточно использовать стиль по умолчанию, а для переформатирования применять сочетание клавиш <keycap>Ctrl-Alt-L</keycap>.</para>
        <para>Максимальная длина строки − 120 символов. Длина отступа - 4 символа, использование пробелов вместо символов табуляции включено.</para>
      </listitem>
      <listitem>
        <para>XML код: длина отступа - 4 символа, использование пробелов вместо символов табуляции включено.</para>
      </listitem>
    </itemizedlist>
    <para><emphasis role="bold">Соглашения по именованию</emphasis></para>
    <informaltable frame="all" align="center">
      <tgroup cols="3" align="center">
        <colspec colname="c1"/>
        <colspec colname="c2"/>
        <colspec colname="c3"/>
        <thead wordsize="16">
          <row>
            <entry colname="Имя атрибута" role="bord">Идентификатор</entry>
            <entry colname="Тип атрибута" role="caption">Правило именования</entry>
            <entry colname="Тип атрибута" role="caption">Пример</entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry namest="c1" nameend="c3" align="center">
              <emphasis role="bold">Java и Groovy классы </emphasis>
            </entry>
          </row>
          <row>
            <entry align="left">Класс контроллера экрана</entry>
            <entry align="left">
              <para>UpperCamelCase</para>
              <para>Контроллер экрана  списка сущностей − <code>{КлассСущности}Browse</code></para>
              <para>Контроллер экрана редактирования − <code>{КлассСущности}Edit</code></para>
            </entry>
            <entry align="left">
              <para><code>CustomerBrowse</code></para>
              <para><code>OrderEdit</code></para>
            </entry>
          </row>
          <row>
            <entry namest="c1" nameend="c3" align="center">
              <emphasis role="bold">XML дескрипторы экранов</emphasis>
            </entry>
          </row>
          <row>
            <entry align="left">Идентификатор компонента, имена параметров в запросах</entry>
            <entry align="left">
              <para>lowerCamelCase, только буквы и цифры</para>
            </entry>
            <entry align="left">
              <para><literal>attributesTable</literal></para>
              <para><literal>:component$relevantTo</literal></para>
              <para><literal>:ds$attributesDs</literal></para>
            </entry>
          </row>
          <row>
            <entry align="left">Идентификатор источника данных</entry>
            <entry align="left">
              <para>lowerCamelCase, только буквы и цифры, оканчивается на <code>Ds</code></para>
            </entry>
            <entry align="left">
              <code>attributesDs</code>
            </entry>
          </row>
          <row>
            <entry namest="c1" nameend="c3" align="center">
              <emphasis role="bold">SQL скрипты</emphasis>
            </entry>
          </row>
          <row>
            <entry align="left">Зарезервированные слова</entry>
            <entry align="left">lowercase</entry>
            <entry align="left">
              <literal>create table</literal>
            </entry>
          </row>
          <row>
            <entry align="left">Таблицы</entry>
            <entry align="left">UPPER_CASE. Название предваряется именем проекта для формирования пространства имен. В именах таблиц рекомендуется использовать единственное число.</entry>
            <entry align="left">
              <para><literal>SALES_CUSTOMER</literal></para>
            </entry>
          </row>
          <row>
            <entry align="left">Колонки</entry>
            <entry align="left">UPPER_CASE</entry>
            <entry align="left">
              <para><literal>CUSTOMER</literal></para>
              <para><literal>TOTAL_AMOUNT</literal></para>
            </entry>
          </row>
          <row>
            <entry align="left">Колонки внешних ключей</entry>
            <entry align="left">UPPER_CASE. Состоит из имени таблицы, на которую ссылается колонка (без префикса проекта), и суффикса _ID.</entry>
            <entry align="left">
              <literal>CUSTOMER_ID</literal>
            </entry>
          </row>
          <row>
            <entry align="left">Индексы</entry>
            <entry align="left">UPPER_CASE. Состоит из префикса IDX_, имени таблицы, для которой создается инлекс (с префиксом проекта), и имен полей, включенных в индекс.</entry>
            <entry align="left">
              <literal>IDX_SALES_CUSTOMER_NAME</literal>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
  </section>
  <section id="project_file_structure">
    <title>Файловая структура проекта</title>
    <para>Рассмотрим файловую структуру  проекта на примере простого приложения <application>Sales</application>, состоящего из <link linkend="app_tiers">блоков</link> Middleware и Web Client.</para>
    <figure>
      <title>Файловая структура проекта</title>
      <mediaobject>
        <imageobject>
          <imagedata contentwidth="" align="center" fileref="img/project_structure.png"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>В корне проекта расположены скрипты сборки <filename>build.gradle</filename>, <filename>settings.gradle</filename> и проектные файлы <application>IntelliJ IDEA</application>.</para>
    <para id="text_module_id">В каталоге <filename>modules</filename> расположены подкаталоги <link linkend="app_modules">модулей</link> проекта − <structname>global</structname>, <structname>core</structname>, <structname>gui</structname>, <structname>web</structname>. </para>
    <figure>
      <title>Структура модуля global</title>
      <mediaobject>
        <imageobject>
          <imagedata contentwidth="" align="center" fileref="img/project_structure_global.png"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>Модуль <structname>global</structname> содержит каталог исходных текстов <filename>src</filename>, в корне которого располагаются конфигурационные файлы <filename>
        <link linkend="metadata.xml">sales-metadata.xml</link>
      </filename> и <filename>
        <link linkend="persistence.xml">sales-persistence.xml</link>
      </filename>. Пакет <code>com.sample.sales.core</code> содержит интерфейсы сервисов Middleware, пакет <code>com.sample.sales.entity</code> - классы <link linkend="data_model">сущностей</link> и <link linkend="message_packs">файлы локализации</link> для них.</para>
    <figure>
      <title>Структура модуля core</title>
      <mediaobject>
        <imageobject>
          <imagedata contentwidth="" align="center" fileref="img/project_structure_core.png"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>Модуль <structname>core</structname> содержит следующие каталоги:<itemizedlist>
        <listitem>
          <para><filename>db</filename> - каталог <link linkend="db_scripts">скриптов создания и обновления</link> базы данных.</para>
        </listitem>
        <listitem>
          <para><filename>src</filename> - каталог исходных текстов, в корне которого расположены файл <link linkend="app_properties_files">свойств приложения</link> блока Middleware и конфигурационные файлы <filename>
              <link linkend="spring.xml">sales-spring.xml</link>
            </filename> и <filename>
              <link linkend="views.xml">sales-views.xml</link>
            </filename>. Пакет <code>com.samples.sales.core</code> содержит классы  Middleware: реализации <link linkend="services">сервисов</link>, <link linkend="managed_beans">управляемые бины</link>, <link linkend="jmx_beans">JMX-бины</link>.</para>
        </listitem>
        <listitem>
          <para><filename>web</filename> - каталог с конфигурационными файлами веб-приложения, в которое собирается блок Middleware: <filename>
              <link linkend="context.xml">context.xml</link>
            </filename> и <filename>
              <link linkend="web.xml">web.xml</link>
            </filename>.</para>
        </listitem>
      </itemizedlist></para>
    <figure>
      <title>Структура модуля gui</title>
      <mediaobject>
        <imageobject>
          <imagedata contentwidth="" align="center" fileref="img/project_structure_gui.png"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>Модуль <structname>gui</structname> содержит каталог исходных текстов <filename>src</filename>, в корне которого располагается конфигурационный файл <filename>
        <link linkend="screens.xml">sales-screens.xml</link>
      </filename>. Пакет <code>com.sample.sales.gui</code> содержит XML-дескрипторы и контроллеры экранов и  <link linkend="message_packs">файлы локализации</link> для них.</para>
    <figure>
      <title>Структура модуля web</title>
      <mediaobject>
        <imageobject>
          <imagedata contentwidth="" align="center" fileref="img/project_structure_web.png"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>Модуль <structname>web</structname> содержит следующие каталоги:<itemizedlist>
        <listitem>
          <para><filename>src</filename> - каталог исходных текстов, в корне которого расположены файл <link linkend="app_properties_files">свойств приложения</link> блока Web Client и конфигурационные файлы <filename>
              <link linkend="menu.xml">sales-web-menu.xml</link>
            </filename>, <filename>
              <link linkend="permissions.xml">sales-web-permissions.xml</link>
            </filename>, <filename>
              <link linkend="screens.xml">sales-web-screens.xml</link>
            </filename> и <filename>
              <link linkend="spring.xml">sales-web-spring.xml</link>
            </filename>. Пакет <code>com.samples.sales.web</code> содержит главный класс блока Web Client (наследник <code>DefaultApp</code>) и <link linkend="main_message_pack">главный пакет локализованных сообщений</link>.</para>
        </listitem>
        <listitem>
          <para><filename>web</filename> - каталог с конфигурационными файлами веб-приложения, в которое собирается блок Web Client: <filename>
              <link linkend="context.xml">context.xml</link>
            </filename> и <filename>
              <link linkend="web.xml">web.xml</link>
            </filename>.</para>
        </listitem>
      </itemizedlist></para>
  </section>
  <section>
    <title>Описание скриптов сборки</title>
    <para>TODO</para>
  </section>
  <section>
    <title>Создание проекта</title>
    <para>TODO</para>
  </section>
  <section>
    <title>Отладка и тестирование</title>
    <para>TODO</para>
  </section>
  <section>
    <title>Интеграция со сторонними приложениями</title>
    <para>TODO</para>
  </section>
</chapter>
