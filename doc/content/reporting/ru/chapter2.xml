<?xml version='1.0' encoding='UTF-8'?>
<!-- This document was created with Syntext Serna Free. --><chapter lang="ru" id="chapter2_working_in_nix">
  <title>Особенности работы в *nix системах</title>
  <para>Подсистема отчетов использует <application>OpenOffice</application> для создания doc и pdf отчетов. Для работы в серверном режиме необходима установка <application>OpenOffice</application>.</para>
  <para>По опыту развертывания отчетов на серверах <application>ubuntu</application>, для корректного запуска  программного ядра <application>openoffice.org</application> необходимо следующее:</para>
  <itemizedlist>
    <listitem>
      <para>Установить пакет <application>openoffice.org</application>, например, командой </para>
      <para><prompt>sudo aptitude install openoffice.org</prompt></para>
    </listitem>
    <listitem>
      <para>Установить свойство в файле <filename>local.app.properties</filename></para>
      <para><prompt>cuba.reporting.openoffice.path = /usr/lib/openoffice/program (путь к установленному openoffice.org)</prompt></para>
    </listitem>
    <listitem>
      <para>Если на сервере не установлена <application>X window system</application> (оконный интерфейс), то программное ядро  <application>openoffice.org</application> при старте будет выдавать ошибку вида <errortext>Caused by: java.awt.HeadlessException: No X11 DISPLAY variable was set, but this program performed an operation which requires it.</errortext>, или же просто завершаться без сообщений об ошибках. Для устранения проблемы установите свойство в <filename>local.app.properties</filename>:</para>
      <para> <prompt>cuba.reporting.displayDeviceUnavailable = true</prompt>, </para>
      <para>а также установите пакет <application>openoffice.org-headless</application>: </para>
      <para><prompt>sudo aptitude install openoffice.org-headless</prompt></para>
    </listitem>
    <listitem>
      <para>Для диагностики ошибок при старте <application>openoffice.org</application> можно выполнить следующую команду:</para>
      <para><prompt>strace -e trace=signal /usr/lib/openoffice/program/soffice.bin -headless -accept=&quot;socket,host=localhost,port=8100;urp&quot; -nofirststartwizard -nologo -nolockcheck</prompt></para>
    </listitem>
  </itemizedlist>
</chapter>
